import{j as e,B as X,k as I,n as _,H as V,N as Ne,w as R,r as S,c as we,J as Ce,T as ke,K as ie,L as q,O as z,Q as Pe,U as le,V as F,W as K,X as Y,Y as Z,Z as ce,q as de,_ as Ie,$ as Te,u as J,a0 as Se,b as ue,a1 as Le,C as Ae,a2 as $e,a3 as Be,a4 as Fe,a5 as Re,a6 as De}from"./index-327d1c16.js";import{F as Ee,p as Oe,A as Ge,I as He}from"./Fab-f562133d.js";import{R as Me,T as Ue}from"./TextFilter-c32df3ae.js";import{Z as Q}from"./zap-c796c7e2.js";import{f as Ve}from"./index-37c4a7e4.js";import{T as ee}from"./Toggle-9674238c.js";import{S as ze}from"./Select-5e768acf.js";import{B as se}from"./BaseModal-593620bc.js";const qe="_FlexCenter_1380a_1",Ke={FlexCenter:qe};function Ye({children:s}){return e.jsx("div",{className:Ke.FlexCenter,children:s})}const{useRef:te,useEffect:Ze}=I;function Je({onClickPrimaryButton:s,onClickSecondaryButton:t}){const n=te(null),r=te(null);Ze(()=>{n.current.focus()},[]);const o=a=>{a.code==="ArrowRight"?r.current.focus():a.code==="ArrowLeft"&&n.current.focus()};return e.jsxs("div",{onKeyDown:o,children:[e.jsx("h2",{children:"Close Connections?"}),e.jsx("p",{children:"Click [Yes] to close those connections that are still using the old selected proxy in this group"}),e.jsx("div",{style:{height:30}}),e.jsxs(Ye,{children:[e.jsx(X,{onClick:s,ref:n,children:"Yes"}),e.jsx("div",{style:{width:20}}),e.jsx(X,{onClick:t,ref:r,children:"No"})]})]})}const{useMemo:We}=I;function Xe(s,t){return s.filter(n=>{const r=t[n];return r===void 0?!0:!("number"in r&&r.number===0)})}const E=(s,t)=>{if(s&&"number"in s&&s.number>0)return s.number;const n=t&&t.type;return n&&Ne.indexOf(n)>-1?-1:999999},Qe={Natural:s=>s,LatencyAsc:(s,t,n)=>s.sort((r,o)=>{const a=E(t[r],n&&n[r]),i=E(t[o],n&&n[o]);return a-i}),LatencyDesc:(s,t,n)=>s.sort((r,o)=>{const a=E(t[r],n&&n[r]);return E(t[o],n&&n[o])-a}),NameAsc:s=>s.sort(),NameDesc:s=>s.sort((t,n)=>t>n?-1:t<n?1:0)};function es(s,t){const n=t.toLowerCase().split(" ").map(r=>r.trim()).filter(r=>!!r);return n.length===0?s:s.filter(r=>{let o=0;for(;o<n.length;o++){const a=n[o];if(r.toLowerCase().indexOf(a)>-1)return!0}return!1})}function ss(s,t,n,r,o,a){let i=[...s];return n&&(i=Xe(s,t)),typeof r=="string"&&r!==""&&(i=es(i,r)),Qe[o](i,t,a)}function xe(s,t,n,r,o){const[a]=_(V);return We(()=>ss(s,t,n,a,r,o),[s,t,n,a,r,o])}const ts="_modernGroup_5pn4g_1",ns="_groupHeader_5pn4g_12",rs="_groupInfo_5pn4g_20",os="_groupTitle_5pn4g_25",as="_toggleButton_5pn4g_28",is="_chevron_5pn4g_40",ls="_groupIndex_5pn4g_45",cs="_groupMeta_5pn4g_64",ds="_badge_5pn4g_71",us="_groupActions_5pn4g_83",xs="_groupContent_5pn4g_89",ps="_streamingContainer_5pn4g_95",ms="_fadeInUp_5pn4g_1",gs="_loadingIndicator_5pn4g_99",hs="_progressBar_5pn4g_102",fs="_progressFill_5pn4g_109",_s="_summaryView_5pn4g_126",js="_header_5pn4g_229",ys="_groupHead_5pn4g_12",vs="_action_5pn4g_239",h={modernGroup:ts,groupHeader:ns,groupInfo:rs,groupTitle:os,toggleButton:as,chevron:is,groupIndex:ls,groupMeta:cs,badge:ds,"text-muted":"_text-muted_5pn4g_76","text-success":"_text-success_5pn4g_79",groupActions:us,groupContent:xs,streamingContainer:ps,fadeInUp:ms,loadingIndicator:gs,progressBar:hs,progressFill:fs,summaryView:_s,"badge-info":"_badge-info_5pn4g_156","badge-success":"_badge-success_5pn4g_161","badge-warning":"_badge-warning_5pn4g_166","badge-purple":"_badge-purple_5pn4g_171","badge-secondary":"_badge-secondary_5pn4g_176",header:js,groupHead:ys,action:vs},bs="_modernProxy_a8g8w_2",Ns="_proxyHeader_a8g8w_25",ws="_proxyFooter_a8g8w_26",Cs="_proxyIcon_a8g8w_29",ks="_proxyName_a8g8w_35",Ps="_proxyType_a8g8w_38",Is="_proxyLatency_a8g8w_41",Ts="_now_a8g8w_47",Ss="_badge_a8g8w_67",Ls="_selectable_a8g8w_96",As="_ti_a8g8w_132",$s="_activeIndicator_a8g8w_162",Bs="_pulse_a8g8w_1",Fs="_modernDot_a8g8w_216",Rs="_fadeInGlow_a8g8w_1",Ds="_pulseGlow_a8g8w_1",Es="_proxySmall_a8g8w_377",Os="_proxy_a8g8w_25",Gs="_error_a8g8w_957",Hs="_row_a8g8w_979",Ms="_spin_a8g8w_1163",C={modernProxy:bs,proxyHeader:Ns,proxyFooter:ws,proxyIcon:Cs,proxyName:ks,proxyType:Ps,proxyLatency:Is,now:Ts,badge:Ss,selectable:Ls,ti:As,activeIndicator:$s,pulse:Bs,modernDot:Fs,"pulse-dot":"_pulse-dot_a8g8w_1",fadeInGlow:Rs,pulseGlow:Ds,proxySmall:Es,proxy:Os,error:Gs,row:Hs,"pulse-testing":"_pulse-testing_a8g8w_1",spin:Ms},{useMemo:$}=I;function W(s){if(!s)return"var(--color-text-secondary)";if(s.kind==="Testing")return"#ffa726";if(s.kind==="Error"||s.kind==="None")return"var(--color-text-secondary)";if(s.kind==="Result"){const t=s.number;return t<200?"#2e7d32":t<500?"#66bb6a":t<2e3?"#ff8f00":t<5e3?"#ef5350":"#c62828"}return"var(--color-text-secondary)"}function Us(s){if(!s||typeof s!="string")return"ti-server";switch(s.toLowerCase()){case"shadowsocks":case"ss":return"ti-shield";case"vmess":return"ti-message";case"vless":return"ti-lock";case"trojan":case"trojan-go":return"ti-key";case"http":case"https":return"ti-world";case"socks5":case"socks":return"ti-plug";case"snell":return"ti-rocket";case"wireguard":case"wg":return"ti-shield-check";case"hysteria":return"ti-bolt";case"hysteria2":return"ti-flash";case"tuic":return"ti-chart-line";case"ssr":return"ti-star";case"direct":return"ti-arrow-right";case"reject":return"ti-x";case"selector":return"ti-list";case"urltest":return"ti-activity";case"fallback":return"ti-refresh";case"loadbalance":return"ti-scale";case"relay":return"ti-repeat";default:return"ti-server"}}function Vs(s){return s.toUpperCase()}function zs(s,t){let n="var(--color-text-secondary)";return t==="DIRECT"?n="#2e7d32":t==="REJECT"?n="#c62828":s&&(s.kind==="Result"?n=W(s):s.kind==="Testing"?n="#ffa726":n="var(--color-text-secondary)"),{backgroundColor:n,background:n,"--dot-color":n}}function qs({latency:s,color:t}){if(!s)return e.jsx("span",{className:"text-muted",children:"-"});if(s.kind==="Testing")return e.jsxs("span",{className:"fw-medium",style:{color:"#ffa726"},children:[e.jsx("i",{className:"ti ti-loader-2 me-1 spin"}),"Testing"]});if(s.kind==="Error")return e.jsxs("span",{className:"fw-medium",style:{color:"var(--tblr-danger)"},children:[e.jsx("i",{className:"ti ti-x me-1"}),"Error"]});if(s.kind==="None")return e.jsx("span",{className:"text-muted",children:"-"});if(s.kind==="Result"){const n=W(s);return e.jsxs("span",{className:"fw-medium",style:{color:n},children:[s.number,"ms"]})}return e.jsx("span",{className:"text-muted",children:"-"})}function Ks(s){if(!s)return"unknown";if(s.kind==="Testing")return"testing";if(s.kind==="Error"||s.kind==="None")return"unknown";if(s.kind==="Result"){const t=s.number;return t<200?"fast":t<500?"medium":t<2e3?"slow":t<5e3?"very-slow":"extremely-slow"}return"unknown"}function Ys({now:s,name:t,proxy:n,latency:r,isSelectable:o,onClick:a}){const i=$(()=>zs(r,n.type),[r,n]),c=$(()=>{const l=i.backgroundColor;return{width:"10px",height:"10px",borderRadius:"50%",display:"inline-block",cursor:o?"pointer":"default",transition:"all 0.2s ease",border:s?"2px solid var(--color-focus-blue)":"2px solid transparent",backgroundColor:l,boxShadow:s?"0 0 0 2px rgba(var(--color-focus-blue-rgb), 0.25)":"none",transform:s?"scale(1.2)":"scale(1)",outline:"none",backgroundImage:"none",backgroundSize:"auto",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundAttachment:"scroll",backgroundOrigin:"padding-box",backgroundClip:"border-box"}},[i,s,o]),d=$(()=>{let l=t;return r&&r.kind==="Result"&&typeof r.number=="number"&&(l+=" "+r.number+" ms"),l},[t,r]),u=S.useCallback(()=>{o&&a&&a(t)},[t,a,o]),v=S.useCallback(l=>{l.key==="Enter"&&u()},[u]),m=S.useCallback(l=>{o&&(l.currentTarget.style.transform=s?"scale(1.3)":"scale(1.15)",l.currentTarget.style.boxShadow="0 0 6px rgba(0, 0, 0, 0.15)")},[o,s]),p=S.useCallback(l=>{o&&(l.currentTarget.style.transform=s?"scale(1.2)":"scale(1)",l.currentTarget.style.boxShadow=s?"0 0 0 2px rgba(var(--color-focus-blue-rgb), 0.25)":"none")},[o,s]),x=$(()=>Ks(r),[r]),g=n.type==="DIRECT"?"direct":n.type==="REJECT"?"reject":"proxy";return e.jsx("div",{title:d,style:c,"data-latency":x,"data-proxy-type":g,"data-color":i.backgroundColor,onClick:u,onKeyDown:v,onMouseEnter:m,onMouseLeave:p,role:o?"menuitem":"",tabIndex:o?0:-1})}const Zs=s=>({left:s.left+window.scrollX-5,top:s.top+window.scrollY-38});function Js({children:s,label:t,"aria-label":n}){const[r,o]=Ce();return e.jsxs(e.Fragment,{children:[S.cloneElement(s,r),e.jsx(ke,{...o,label:t,"aria-label":n,position:Zs})]})}function Ws({now:s,name:t,proxy:n,latency:r,isSelectable:o,onClick:a}){const i=$(()=>W(r),[r]),c=S.useCallback(()=>{o&&a&&a(t)},[t,a,o]),d=S.useCallback(v=>{v.key==="Enter"&&c()},[c]),u=$(()=>we(C.proxy,C.modernProxy,{[C.now]:s,[C.selectable]:o}),[o,s]);return e.jsxs("div",{tabIndex:0,className:u,onClick:c,onKeyDown:d,role:o?"menuitem":"",children:[e.jsxs("div",{className:C.proxyHeader,children:[e.jsx("div",{className:C.proxyIcon,children:e.jsx("i",{className:`ti ${Us(n.type)}`,title:`${n.type}`})}),e.jsx("div",{className:C.proxyName,children:e.jsx(Js,{label:t,"aria-label":"proxy name: "+t,children:e.jsx("span",{className:"fw-medium",children:t})})}),s&&e.jsx("div",{className:C.activeIndicator,children:e.jsx("i",{className:"ti ti-point-filled text-success"})})]}),e.jsxs("div",{className:C.proxyFooter,children:[e.jsx("div",{className:C.proxyType,children:e.jsx("span",{className:"badge badge-sm",children:Vs(n.type)})}),e.jsx("div",{className:C.proxyLatency,children:e.jsx(qs,{latency:r,color:i})})]})]})}const pe=(s,{name:t})=>{const n=ie(s),r=q(s);return{proxy:n[t],latency:r[t]}},Xs=R(pe)(Ws),Qs=R(pe)(Ys),et="_list_1ivlv_1",st="_listSummaryView_1ivlv_21",me={list:et,listSummaryView:st};function ge({all:s,now:t,isSelectable:n,itemOnTapCallback:r}){const o=s;return e.jsx("div",{className:me.list,children:o.map(a=>e.jsx(Xs,{onClick:r,isSelectable:n,name:a,now:a===t},a))})}function he({all:s,now:t,isSelectable:n,itemOnTapCallback:r}){return e.jsx("div",{className:me.listSummaryView,children:s.map(o=>e.jsx(Qs,{onClick:r,isSelectable:n,name:o,now:o===t},o))})}const{createElement:fe,useCallback:O,useMemo:_e,useState:ne,useEffect:tt,useRef:re}=I,je=S.memo(({all:s,now:t,isSelectable:n,itemOnTapCallback:r})=>{const[o,a]=ne(0),[i,c]=ne(!0),d=re(null),u=re(),v=12,m=30,p=50;tt(()=>{if(s.length===0){c(!1);return}return a(0),c(!0),u.current&&clearTimeout(u.current),(()=>{let l=0;const N=()=>{if(l>=s.length){c(!1);return}const j=Math.min(l+v,s.length);a(j),l=j,l<s.length?u.current=setTimeout(N,m):c(!1)};u.current=setTimeout(N,p)})(),()=>{u.current&&clearTimeout(u.current)}},[s.length]);const x=_e(()=>s.slice(0,o),[s,o]);return s.length===0?e.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center py-4",children:[e.jsx("i",{className:"ti ti-server-off text-muted mb-2",style:{fontSize:"2rem"}}),e.jsx("span",{className:"text-muted",children:"No proxies available"})]}):e.jsxs("div",{ref:d,className:h.proxyContainer,children:[o>0&&e.jsx("div",{className:h.streamingContainer,children:fe(ge,{all:x,now:t,isSelectable:n,itemOnTapCallback:r})}),i&&e.jsx("div",{className:h.loadingIndicator,children:e.jsx("div",{className:h.progressBar,children:e.jsx("div",{className:h.progressFill,style:{width:`${o/s.length*100}%`,transition:"width 0.3s ease-out"}})})})]})});je.displayName="StreamingProxyList";function nt({name:s,index:t,all:n,delay:r,proxies:o,type:a,now:i,apiConfig:c,dispatch:d}){const[u,v]=_(K),m=u[`proxyGroup:${s}`],[p]=_(Y),[x]=_(Z),g=xe(n,r,x,p,o),l=_e(()=>a==="Selector",[a]),{proxies:{requestDelayForProxies:N}}=z(),j=O((w,D,ve)=>{v(be=>({...be,[`${w}:${D}`]:ve}))},[v]),B=O(()=>{j("proxyGroup",s,!m)},[m,j,s]),[A]=_(ce),L=O(w=>{l&&d(Pe(c,s,w,A))},[c,d,s,l,A]),[y]=_(de),P=le(!1),f=O(async()=>{if(!P.value){P.set(!0);try{await N(c,g,y)}catch{}P.set(!1)}},[g,c,y,N,P]),b=w=>{switch(w){case"Selector":return"ti-hand-click";case"URLTest":return"ti-speedboat";case"Fallback":return"ti-shield-check";case"LoadBalance":return"ti-scale";case"Relay":return"ti-route";default:return"ti-server"}},T=w=>{switch(w){case"Selector":return"badge-info";case"URLTest":return"badge-success";case"Fallback":return"badge-warning";case"LoadBalance":return"badge-purple";case"Relay":return"badge-secondary";default:return"badge-outline"}};return e.jsxs("div",{className:h.modernGroup,children:[e.jsxs("div",{className:h.groupHeader,children:[e.jsxs("div",{className:h.groupInfo,children:[e.jsx("div",{className:h.groupTitle,children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("button",{className:`btn btn-ghost p-0 d-flex align-items-center gap-2 ${h.toggleButton}`,onClick:B,children:[e.jsx("i",{className:`ti ${m?"ti-chevron-down":"ti-chevron-right"} ${h.chevron}`}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:h.groupIndex,children:t}),e.jsx("i",{className:`ti ${b(a)} text-primary`}),e.jsx("span",{className:"fw-semibold",children:s})]})]}),e.jsx(F,{label:"Test latency",children:e.jsx("button",{className:"btn btn-ghost-secondary btn-sm d-flex align-items-center justify-content-center",style:{width:"28px",height:"28px"},onClick:f,disabled:P.value,children:P.value?e.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",style:{width:"14px",height:"14px"},children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):e.jsx("i",{className:"ti ti-bolt",style:{fontSize:"14px"}})})})]})}),e.jsxs("div",{className:h.groupMeta,children:[e.jsx("span",{className:`badge ${T(a)} badge-sm`,children:a}),e.jsxs("span",{className:"text-muted",children:[g.length," ",g.length===1?"proxy":"proxies"]}),i&&e.jsxs("div",{className:"d-flex align-items-center gap-1",children:[e.jsx("i",{className:"ti ti-point-filled text-success",style:{fontSize:"8px"}}),e.jsx("span",{className:"text-success fw-medium",children:i})]})]})]}),e.jsx("div",{className:h.groupActions})]}),m&&e.jsx("div",{className:h.groupContent,children:e.jsx(je,{all:g,now:i,isSelectable:l,itemOnTapCallback:L})}),!m&&g.length>0&&e.jsxs("div",{className:h.summaryView,children:[fe(he,{all:g.slice(0,20),now:i,isSelectable:l,itemOnTapCallback:L}),g.length>20&&e.jsxs("span",{className:"text-muted ms-2",children:["+",g.length-20," more"]})]})]})}const rt=R((s,{name:t,index:n,delay:r})=>{const o=ie(s),a=o[t],{all:i,type:c,now:d}=a;return{all:i,delay:r,proxies:o,type:c,now:d,index:n}})(nt),{useCallback:ye,useState:ot}=I;function at({dispatch:s,apiConfig:t,name:n}){return ye(()=>s(Ie(t,n)),[t,s,n])}function it({dispatch:s,apiConfig:t,names:n}){const[r,o]=ot(!1);return[ye(async()=>{if(!r){o(!0);try{await s(Te(t,n))}catch{}o(!1)}},[t,s,n,r]),r]}const{useState:lt,useCallback:ct}=I;function dt({isLoading:s}){return s?e.jsx(He,{children:e.jsx(Q,{width:16,height:16})}):e.jsx(Q,{width:16,height:16})}function ut({dispatch:s,apiConfig:t}){const[n,r]=lt(!1),[o]=_(de);return[ct(()=>{n||(r(!0),s(Se(t,o)).then(()=>r(!1),()=>r(!1)))},[t,s,n,o]),n]}function xt({dispatch:s,apiConfig:t,proxyProviders:n}){const{t:r}=J(),[o,a]=ut({dispatch:s,apiConfig:t}),[i,c]=it({apiConfig:t,dispatch:s,names:n.map(d=>d.name)});return e.jsx(Ee,{icon:e.jsx(dt,{isLoading:a}),onClick:o,text:r("Test Latency"),style:Oe,children:n.length>0?e.jsx(Ge,{text:r("update_all_proxy_provider"),onClick:i,children:e.jsx(Me,{isRotating:c})}):null})}const pt="_modernProvider_jotl4_1",mt="_providerHeader_jotl4_12",gt="_providerInfo_jotl4_20",ht="_providerTitle_jotl4_25",ft="_toggleButton_jotl4_28",_t="_chevron_jotl4_40",jt="_providerMeta_jotl4_45",yt="_badge_jotl4_52",vt="_providerActions_jotl4_61",bt="_providerContent_jotl4_67",Nt="_summaryView_jotl4_73",wt="_updatedAt_jotl4_138",Ct="_main_jotl4_145",kt="_head_jotl4_154",Pt="_action_jotl4_160",It="_refresh_jotl4_168",k={modernProvider:pt,providerHeader:mt,providerInfo:gt,providerTitle:ht,toggleButton:ft,chevron:_t,providerMeta:jt,badge:yt,"text-muted":"_text-muted_jotl4_57",providerActions:vt,providerContent:bt,summaryView:Nt,"badge-info":"_badge-info_jotl4_94","badge-warning":"_badge-warning_jotl4_99","badge-secondary":"_badge-secondary_jotl4_104",updatedAt:wt,main:Ct,head:kt,action:Pt,refresh:It},{useCallback:G}=I;function Tt({name:s,proxies:t,delay:n,vehicleType:r,updatedAt:o,dispatch:a}){const[i,c]=_(K),d=i[`proxyProvider:${s}`],[u]=_(Y),[v]=_(Z),m=ue(),p=xe(t,n,v,u),x=le(!1),g=at({dispatch:a,apiConfig:m,name:s}),l=G(()=>{if(x.value)return;x.set(!0);const y=()=>x.set(!1);a(Le(m,s)).then(y,y)},[m,a,s,x]),N=G((y,P,f)=>{c(b=>({...b,[`${y}:${P}`]:f}))},[c]),j=G(()=>{N("proxyProvider",s,!d)},[d,N,s]),B=Ve(new Date(o),new Date),A=y=>{switch(y){case"HTTP":return"ti-world-www";case"File":return"ti-file";case"Compatible":return"ti-puzzle";default:return"ti-cloud"}},L=y=>{switch(y){case"HTTP":return"badge-info";case"File":return"badge-warning";case"Compatible":return"badge-secondary";default:return"badge-outline"}};return e.jsxs("div",{className:k.modernProvider,children:[e.jsxs("div",{className:k.providerHeader,children:[e.jsxs("div",{className:k.providerInfo,children:[e.jsx("div",{className:k.providerTitle,children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("button",{className:`btn btn-ghost p-0 d-flex align-items-center gap-2 ${k.toggleButton}`,onClick:j,children:[e.jsx("i",{className:`ti ${d?"ti-chevron-down":"ti-chevron-right"} ${k.chevron}`}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:`ti ${A(r)} text-primary`}),e.jsx("span",{className:"fw-semibold",children:s})]})]}),e.jsx(F,{label:"Health check",children:e.jsx("button",{className:"btn btn-ghost-secondary btn-sm d-flex align-items-center justify-content-center",style:{width:"28px",height:"28px"},onClick:l,disabled:x.value,children:x.value?e.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",style:{width:"14px",height:"14px"},children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):e.jsx("i",{className:"ti ti-bolt",style:{fontSize:"14px"}})})}),e.jsx(F,{label:"Update provider",children:e.jsx("button",{className:"btn btn-ghost-secondary btn-sm d-flex align-items-center justify-content-center",style:{width:"28px",height:"28px"},onClick:g,children:e.jsx("i",{className:"ti ti-refresh",style:{fontSize:"14px"}})})})]})}),e.jsxs("div",{className:k.providerMeta,children:[e.jsx("span",{className:`badge ${L(r)} badge-sm`,children:r}),e.jsxs("span",{className:"text-muted",children:[p.length," ",p.length===1?"proxy":"proxies"]}),o&&e.jsxs("div",{className:"d-flex align-items-center gap-1 text-muted",children:[e.jsx("i",{className:"ti ti-clock",style:{fontSize:"12px"}}),e.jsxs("span",{style:{fontSize:"0.8rem"},children:["Updated ",B," ago"]})]})]})]}),e.jsx("div",{className:k.providerActions})]}),d&&e.jsx("div",{className:k.providerContent,children:e.jsx("div",{className:k.proxyContainer,children:e.jsx(ge,{all:p})})}),!d&&p.length>0&&e.jsxs("div",{className:k.summaryView,children:[e.jsx(he,{all:p.slice(0,20)}),p.length>20&&e.jsxs("span",{className:"text-muted ms-2",children:["+",p.length-20," more"]})]})]})}const St=(s,{proxies:t})=>{const n=q(s);return{proxies:t,delay:n}},Lt=R(St)(Tt);function At({items:s}){return s.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx(Ae,{title:"Proxy Provider"}),e.jsx("div",{children:s.map(t=>e.jsx(Lt,{name:t.name,proxies:t.proxies,type:t.type,vehicleType:t.vehicleType,updatedAt:t.updatedAt},t.name))})]})}const $t="_labeledInput_cmki0_1",H={labeledInput:$t},Bt=[["Natural","order_natural"],["LatencyAsc","order_latency_asc"],["LatencyDesc","order_latency_desc"],["NameAsc","order_name_asc"],["NameDesc","order_name_desc"]],{useCallback:oe}=I;function Ft(){const[s,t]=_(ce),[n,r]=_(Y),[o,a]=_(Z),i=oe(u=>r(u.target.value),[r]),c=oe(u=>{a(u)},[a]),{t:d}=J();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:H.labeledInput,children:[e.jsx("span",{children:d("sort_in_grp")}),e.jsx("div",{children:e.jsx(ze,{options:Bt.map(u=>[u[0],d(u[1])]),selected:n,onChange:i})})]}),e.jsx("hr",{}),e.jsxs("div",{className:H.labeledInput,children:[e.jsx("label",{htmlFor:"hideUnavailableProxies",children:d("hide_unavail_proxies")}),e.jsx("div",{children:e.jsx(ee,{id:"hideUnavailableProxies",checked:o,onChange:c})})]}),e.jsxs("div",{className:H.labeledInput,children:[e.jsx("label",{htmlFor:"autoCloseOldConns",children:d("auto_close_conns")}),e.jsx("div",{children:e.jsx(ee,{id:"autoCloseOldConns",checked:s,onChange:t})})]})]})}const{useState:M,useEffect:U,useCallback:ae,useRef:Yt,useMemo:Rt,startTransition:Dt}=I;function Et({dispatch:s,groupNames:t,delay:n,proxyProviders:r,showModalClosePrevConns:o,isLoading:a}){const[i,c]=M(!1),[d,u]=M(0),[v,m]=M(!0),p=ue(),{t:x}=J();z();const[,g]=_(V),[l,N]=_(K),j=Rt(()=>t.every(f=>l[`proxyGroup:${f}`]===!0),[t,l]),B=ae(()=>{const f={...l},b=!j;t.forEach(T=>{f[`proxyGroup:${T}`]=b}),N(f)},[t,l,N,j]),A=ae(()=>{c(!1)},[]),{proxies:{closeModalClosePrevConns:L,closePrevConnsAndTheModal:y}}=z();U(()=>{s($e(p))},[p,s]),U(()=>()=>{g("")},[g]),U(()=>{if(t.length===0){m(!1),u(0);return}u(0),m(!0);const f=6,b=50;let T=0;const w=()=>{if(T>=t.length){m(!1);return}const D=Math.min(T+f,t.length);Dt(()=>{u(D)}),T=D,T<t.length?setTimeout(w,b):setTimeout(()=>m(!1),b)};setTimeout(w,20)},[t.length]),t.reduce((f,b)=>f+1,0);const P=r.length;return e.jsxs("div",{className:"page-wrapper",children:[e.jsx("div",{className:"page-header d-print-none",children:e.jsx("div",{className:"container-fluid px-4",children:e.jsxs("div",{className:"row g-2 align-items-center",children:[e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"page-pretitle",children:"Network"}),e.jsxs("h2",{className:"page-title d-flex align-items-center gap-2",children:[e.jsx("i",{className:"ti ti-world"}),x("Proxies")]})]}),e.jsx("div",{className:"col-auto",children:e.jsxs("div",{className:"d-flex gap-2 align-items-center flex-wrap",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 text-muted",children:[e.jsxs("div",{className:"d-flex align-items-center gap-1",children:[e.jsx("i",{className:"ti ti-server"}),e.jsx("span",{className:"fw-medium",children:t.length}),e.jsx("span",{className:"text-muted d-none d-sm-inline",children:"Groups"})]}),e.jsxs("div",{className:"d-flex align-items-center gap-1",children:[e.jsx("i",{className:"ti ti-database"}),e.jsx("span",{className:"fw-medium",children:P}),e.jsx("span",{className:"text-muted d-none d-sm-inline",children:"Providers"})]})]}),e.jsx("div",{style:{minWidth:"200px",maxWidth:"300px",flex:"1 1 auto"},children:e.jsx(Ue,{textAtom:V,placeholder:x("Search proxies...")})}),e.jsx(F,{label:x("settings"),children:e.jsx("button",{className:"btn btn-ghost-secondary btn-sm d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px"},onClick:()=>c(!0),children:e.jsx("i",{className:"ti ti-settings"})})})]})})]})})}),e.jsx("div",{className:"page-body",children:e.jsxs("div",{className:"container-fluid px-4",children:[t.length>0&&e.jsxs("div",{className:"card mb-3",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h3",{className:"card-title d-flex align-items-center gap-2",children:[e.jsx("i",{className:"ti ti-layers-intersect"}),x("Proxy Groups"),e.jsx(F,{label:x(j?"Collapse all groups":"Expand all groups"),children:e.jsx("button",{className:"btn btn-ghost-secondary btn-sm d-flex align-items-center justify-content-center",style:{width:"28px",height:"28px"},onClick:B,disabled:t.length===0,children:e.jsx("i",{className:"ti ti-chevrons-down",style:{fontSize:"14px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:j?"rotate(180deg)":"rotate(0deg)",color:j?"var(--color-primary)":"var(--color-text-secondary)"}})})})]}),e.jsx("div",{className:"card-actions",children:e.jsxs("div",{className:"text-muted",children:[t.length," ",x("groups")]})})]}),e.jsxs("div",{className:"card-body p-0",children:[t.slice(0,d).map((f,b)=>e.jsx("div",{className:"border-bottom",style:{animation:"fadeInUp 0.3s ease-out",animationDelay:`${b%4*30}ms`,animationFillMode:"both"},children:e.jsx(rt,{name:f,index:b+1,delay:n,apiConfig:p,dispatch:s})},f)),v&&d<t.length&&e.jsx("div",{className:"d-flex align-items-center justify-content-center py-3",children:e.jsx("div",{style:{width:"200px",height:"2px",backgroundColor:"var(--color-separator)",borderRadius:"1px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",background:"linear-gradient(90deg, var(--tblr-primary), var(--tblr-info))",borderRadius:"1px",width:`${d/t.length*100}%`,transition:"width 0.3s ease-out"}})})})]})]}),r.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h3",{className:"card-title d-flex align-items-center gap-2",children:[e.jsx("i",{className:"ti ti-cloud-download"}),x("Proxy Providers")]}),e.jsx("div",{className:"card-actions",children:e.jsxs("div",{className:"text-muted",children:[r.length," ",x("providers")]})})]}),e.jsx("div",{className:"card-body p-0",children:e.jsx(At,{items:r})})]}),!a&&t.length===0&&r.length===0&&e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body text-center py-5",children:e.jsxs("div",{className:"empty",children:[e.jsx("div",{className:"empty-icon",children:e.jsx("i",{className:"ti ti-world-off",style:{fontSize:"48px",color:"var(--color-text-secondary)"}})}),e.jsx("p",{className:"empty-title",children:x("No proxies found")}),e.jsx("p",{className:"empty-subtitle text-muted",children:x("Configure your proxy groups and providers to get started")})]})})})]})}),e.jsx(xt,{dispatch:s,apiConfig:p,proxyProviders:r}),e.jsx(se,{isOpen:i,onRequestClose:A,children:e.jsx(Ft,{})}),e.jsx(se,{isOpen:o,onRequestClose:L,children:e.jsx(Je,{onClickPrimaryButton:()=>y(p),onClickSecondaryButton:L})})]})}const Ot=s=>({groupNames:Be(s),proxyProviders:Fe(s),delay:q(s),showModalClosePrevConns:Re(s),isLoading:De(s)}),Zt=R(Ot)(Et);export{Zt as default};
