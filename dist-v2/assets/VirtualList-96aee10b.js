import{j as n,r as a}from"./index.v2-1cf93f6a.js";function T({items:e,height:o,itemHeight:s,renderItem:p,className:d="",overscan:l=5,onScroll:x,loading:i=!1,emptyComponent:j}){const[h,b]=a.useState(0),M=a.useRef(null),u=a.useMemo(()=>{if(e.length===0)return{start:0,end:0};let t=0,r=0,f=0;if(typeof s=="number")t=Math.floor(h/s),r=Math.min(e.length-1,t+Math.ceil(o/s));else{for(let c=0;c<e.length;c++){const y=s(c,e[c]);if(f+y>h&&t===0&&(t=Math.max(0,c-l)),f>h+y){r=Math.min(e.length-1,c+l);break}f+=y}r===0&&(r=e.length-1)}return{start:Math.max(0,t-l),end:Math.min(e.length-1,r+l)}},[e,h,o,s,l]),v=a.useMemo(()=>typeof s=="number"?e.length*s:e.reduce((t,r,f)=>t+s(f,r),0),[e,s]),k=a.useMemo(()=>{if(typeof s=="number")return u.start*s;let t=0;for(let r=0;r<u.start;r++)t+=s(r,e[r]);return t},[u.start,s,e]),N=a.useCallback(t=>{const r=t.currentTarget.scrollTop;b(r),x==null||x(r)},[x]),g=a.useMemo(()=>{const t=[];for(let r=u.start;r<=u.end;r++)r<e.length&&t.push({index:r,item:e[r]});return t},[e,u]);return!i&&e.length===0?n.jsx("div",{className:`flex items-center justify-center ${d}`,style:{height:o},children:j||n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"暂无数据"})]})}):n.jsx("div",{ref:M,className:`relative overflow-auto ${d}`,style:{height:o},onScroll:N,children:n.jsx("div",{style:{height:v},children:n.jsx("div",{style:{transform:`translateY(${k}px)`,position:"relative"},children:i?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"加载中..."})]}):g.map(({index:t,item:r})=>n.jsx("div",{style:{height:typeof s=="number"?s:s(t,r)},children:p(r,t)},t))})})})}function m({items:e,height:o,itemHeight:s,renderItem:p,className:d,...l}){return n.jsx(T,{items:e,height:o,itemHeight:s,renderItem:p,className:d,...l})}export{m as F};
