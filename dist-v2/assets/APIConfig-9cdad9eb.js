import{j as e,k as L,n as R,r as a,L as U}from"./index.v2-9aff3c27.js";import{C as u,B as l}from"./Card-f6330010.js";const y=({className:c,type:n="text",...d})=>e.jsx("input",{type:n,className:L("flex h-10 w-full rounded-md border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-700 px-3 py-2 text-sm","text-gray-900 dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50",c),...d});function S(){const{configs:c,selectedIndex:n,currentConfig:d,addConfig:b,removeConfig:j,updateConfig:p,switchConfig:f}=R(),[r,i]=a.useState({baseURL:"",secret:""}),[x,m]=a.useState(!1),[o,g]=a.useState(null),k=a.useCallback(()=>{i({baseURL:"",secret:""}),m(!0),g(null)},[]),v=a.useCallback(s=>{const t=c[s];i({baseURL:t.baseURL,secret:t.secret}),m(!1),g(s)},[c]),h=a.useCallback(()=>{m(!1),g(null),i({baseURL:"",secret:""})},[]),N=a.useCallback(()=>{if(!r.baseURL.trim()){alert("请输入API地址");return}const s={baseURL:r.baseURL.trim(),secret:r.secret.trim()};if(x){const t=b(s);console.log(`✅ 添加新配置成功，索引: ${t}`)}else o!==null&&p(o,s)&&console.log(`✅ 更新配置 ${o} 成功`);h()},[r,x,o,b,p,h]),C=a.useCallback(s=>{if(s===0){alert("不能删除默认配置");return}confirm("确定要删除这个配置吗？")&&j(s)&&console.log(`✅ 删除配置 ${s} 成功`)},[j]),w=a.useCallback(s=>{f(s)&&console.log(`✅ 切换到配置 ${s} 成功`)},[f]);return d?e.jsx("div",{className:"page-wrapper api-config-page",children:e.jsx("div",{className:"page-body",children:e.jsx("div",{className:"container-fluid px-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"API 配置管理"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"管理 Clash API 连接配置"})]}),e.jsx(u,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"当前配置"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API 地址"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded border",children:d.baseURL})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Secret"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded border",children:d.secret||"(未设置)"})]})]})]})}),e.jsx(u,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"配置列表"}),e.jsx(l,{variant:"primary",onClick:k,children:"添加配置"})]}),e.jsx("div",{className:"space-y-3",children:c.map((s,t)=>e.jsx("div",{className:`p-3 border rounded-lg ${t===n?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.baseURL}),s.secret&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Secret: ",s.secret.substring(0,8),"..."]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t===n&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 px-2 py-1 rounded",children:"当前"}),t!==n&&e.jsx(l,{variant:"outline",size:"sm",onClick:()=>w(t),children:"切换"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>v(t),children:"编辑"}),t!==0&&e.jsx(l,{variant:"outline",size:"sm",onClick:()=>C(t),className:"text-red-600 hover:text-red-700",children:"删除"})]})]})},t))})]})}),(x||o!==null)&&e.jsx(u,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:x?"添加新配置":"编辑配置"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"baseURL",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API 地址 *"}),e.jsx(y,{id:"baseURL",type:"text",placeholder:"http://127.0.0.1:9090",value:r.baseURL,onChange:s=>i(t=>({...t,baseURL:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"secret",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Secret"}),e.jsx(y,{id:"secret",type:"password",placeholder:"留空表示无密码",value:r.secret,onChange:s=>i(t=>({...t,secret:s.target.value}))})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(l,{variant:"primary",onClick:N,children:"保存"}),e.jsx(l,{variant:"outline",onClick:h,children:"取消"})]})]})]})})]})})})}):e.jsx(U,{text:"正在加载API配置..."})}export{S as default};
