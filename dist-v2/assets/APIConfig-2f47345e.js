import{j as e,k as S,n as U,r as a,L as I}from"./index.v2-c7e1ae97.js";import{C as b,B as l}from"./Card-a43ad9b1.js";const k=({className:n,type:i="text",...r})=>e.jsx("input",{type:i,className:S("flex h-10 w-full rounded-md border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-700 px-3 py-2 text-sm","text-gray-900 dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50",n),...r}),$=()=>{const{configs:n,selectedIndex:i,currentConfig:r,addConfig:j,removeConfig:p,updateConfig:f,switchConfig:y}=U(),[c,d]=a.useState({baseURL:"",secret:""}),[x,m]=a.useState(!1),[o,g]=a.useState(null),[h,v]=a.useState(!1),N=a.useCallback(()=>{d({baseURL:"",secret:""}),m(!0),g(null)},[]),C=a.useCallback(t=>{const s=n[t];d({baseURL:s.baseURL,secret:s.secret}),m(!1),g(t)},[n]),u=a.useCallback(()=>{m(!1),g(null),d({baseURL:"",secret:""})},[]),w=a.useCallback(()=>{if(!c.baseURL.trim()){alert("请输入API地址");return}const t={baseURL:c.baseURL.trim(),secret:c.secret.trim()};if(x){const s=j(t);console.log(`✅ 添加新配置成功，索引: ${s}`)}else o!==null&&f(o,t)&&console.log(`✅ 更新配置 ${o} 成功`);u()},[c,x,o,j,f,u]),L=a.useCallback(t=>{if(t===0){alert("不能删除默认配置");return}confirm("确定要删除这个配置吗？")&&p(t)&&console.log(`✅ 删除配置 ${t} 成功`)},[p]),R=a.useCallback(t=>{y(t)&&console.log(`✅ 切换到配置 ${t} 成功`)},[y]);return r?e.jsx("div",{className:"page-wrapper api-config-page",children:e.jsx("div",{className:"page-body",children:e.jsx("div",{className:"container-fluid px-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"API 配置管理"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"管理 Clash API 连接配置"})]}),e.jsx(b,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"当前配置"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API 地址"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded border",children:r.baseURL})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Secret"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"flex-1 text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded border",children:r.secret?h?r.secret:"••••••••••••":"(未设置)"}),r.secret&&e.jsx(l,{variant:"outline",size:"sm",onClick:()=>v(!h),className:"px-2 py-1 text-xs",children:h?"隐藏":"显示"})]})]})]})]})}),e.jsx(b,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"配置列表"}),e.jsx(l,{variant:"primary",onClick:N,children:"添加配置"})]}),e.jsx("div",{className:"space-y-3",children:n.map((t,s)=>e.jsx("div",{className:`p-3 border rounded-lg ${s===i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.baseURL}),t.secret&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Secret: ••••••••"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s===i&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 px-2 py-1 rounded",children:"当前"}),s!==i&&e.jsx(l,{variant:"outline",size:"sm",onClick:()=>R(s),children:"切换"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>C(s),children:"编辑"}),s!==0&&e.jsx(l,{variant:"outline",size:"sm",onClick:()=>L(s),className:"text-red-600 hover:text-red-700",children:"删除"})]})]})},s))})]})}),(x||o!==null)&&e.jsx(b,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:x?"添加新配置":"编辑配置"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"baseURL",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API 地址 *"}),e.jsx(k,{id:"baseURL",type:"text",placeholder:"http://127.0.0.1:9090",value:c.baseURL,onChange:t=>d(s=>({...s,baseURL:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"secret",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Secret"}),e.jsx(k,{id:"secret",type:"password",placeholder:"留空表示无密码",value:c.secret,onChange:t=>d(s=>({...s,secret:t.target.value}))})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(l,{variant:"primary",onClick:w,children:"保存"}),e.jsx(l,{variant:"outline",onClick:u,children:"取消"})]})]})]})})]})})})}):e.jsx(I,{text:"正在加载API配置..."})};export{$ as APIConfig};
